#Module 1 - Managing Azure Subscriptions and Resources  
## Exploring Monitoring Capabilities in Azure 

__Azure Monitor__
![alt text](https://docs.microsoft.com/en-us/azure/azure-monitor/media/overview/overview.png)

- Metrics
![alt text](https://docs.microsoft.com/en-us/azure/azure-monitor/media/overview/metrics.png)

- Logs
![alt text](https://docs.microsoft.com/en-us/azure/azure-monitor/media/overview/logs.png)


Azure Monitor provides three main capabilities.

- Monitor and visualize metrics. Metrics are numerical values available from Azure resources helping you understand the health, operation and performance of your system.

- Query and analyze logs. Logs are activity logs, diagnostic logs, and telemetry from monitoring solutions; analytics queries help with troubleshooting and visualizations.

- Setup alerts and actions. Alerts notify you of critical conditions and potentially take automated corrective actions based on triggers from metrics or logs.


__Data Types__

Azure Monitor can collect data from a variety of sources. You can think of monitoring data for your applications in tiers ranging from your application, any operating system and services it relies on, down to the platform itself. Azure Monitor collects data from each of the following tiers:

- __Application monitoring data__: Data about the performance and functionality of the code you have written, regardless of its platform.

- __Guest OS monitoring data__: Data about the operating system on which your application is running. This could be running in Azure, another cloud, or on-premises.

- __Azure resource monitoring data__: Data about the operation of an Azure resource.

- __Azure subscription monitoring data__: Data about the operation and management of an Azure subscription, as well as data about the health and operation of Azure itself.

- __Azure tenant monitoring data__: Data about the operation of tenant-level Azure services, such as Azure Active Directory.


__Activity Log__
The Azure Activity Log is a subscription log that provides insight into subscription-level events that have occurred in Azure. This includes a range of data, from Azure Resource Manager operational data to updates on Service Health events.

With the Activity Log, you can determine the ‘what, who, and when’ for any write operations (PUT, POST, DELETE) taken on the resources in your subscription. You can also understand the status of the operation and other relevant properties. Through activity logs, you can determine:

- What operations were taken on the resources in your subscription.
- Who started the operation.
- When the operation occurred.
- The status of the operation.
- The values of other properties that might help you research the operation.

![alt text](https://openedx.microsoft.com/assets/courseware/v1/ce02dd3bc70644c739c728160039f737/asset-v1:Microsoft+AZ-300.1+2019_T2+type@asset+block/AZ103_Activity_Log.png)

>Activity logs are __kept for 90 days__. You can query for any range of dates, as long as the starting date isn't more than 90 days in the past. You can retrieve events from your Activity Log using the Azure portal, CLI, PowerShell cmdlets, and Azure Monitor REST API.

__Query the Activity Log__

![alt text](https://openedx.microsoft.com/assets/courseware/v1/343b6a9e24946d184ec766d9db599b6d/asset-v1:Microsoft+AZ-300.1+2019_T2+type@asset+block/AZ103_Query_the_Activity_Log.png)

_Event Categories_
The Activity Log provides several event categories. You may select one or more.

- __Administrative__. This category contains the record of all create, update, delete, and action operations performed through Resource Manager. Examples of the types of events you would see in this category include “create virtual machine” and "delete network security group". The Administrative category also includes any changes to role-based access control in a subscription.

- __Service Health__. This category contains the record of any service health incidents that have occurred in Azure. An example of the type of event you would see in this category is “SQL Azure in East US is experiencing downtime.” Service health events come in five varieties: Action Required, Assisted Recovery, Incident, Maintenance, Information, or Security.

- __Alert__. This category contains the record of all activations of Azure alerts. An example of the type of event you would see in this category is “CPU % on myVM has been over 80 for the past 5 minutes.”

- __Autoscale__. This category contains the record of any events related to the operation of the autoscale engine based on any autoscale settings you have defined in your subscription. An example of the type of event you would see in this category is “Autoscale scale up action failed.”

- __Recommendation__. This category contains recommendation events from certain resource types, such as web sites and SQL servers. These events offer recommendations for how to better utilize your resources.

- __Security__. This category contains the record of any alerts generated by Azure Security Center. An example of the type of event you would see in this category is “Suspicious double extension file executed.”

- __Policy__ and Resource Health. These categories do not contain any events; they are reserved for future use.

__Azure Advisor__
Advisor is a personalized cloud consultant that helps you follow best practices to optimize your Azure deployments. It analyzes your resource configuration and usage telemetry and then recommends solutions that can help you improve the cost effectiveness, performance, high availability, and security of your Azure resources.

The Advisor cost recommendations page helps you optimize and reduce your overall Azure spend by identifying idle and underutilized resources.
![alt text](https://openedx.microsoft.com/assets/courseware/v1/507eebdf6040c8446498956646909c75/asset-v1:Microsoft+AZ-300.1+2019_T2+type@asset+block/AZ-100.1_Subscriptions_and_Resources_image33.png)

>Advisor provides recommendations for virtual machines, availability sets, application gateways, App Services, SQL servers, and Redis Cache.


