## Module 4 - Configuring and Managing Virtual Networks

### Azure Virtual Networks

__Azure Networking Components__

![alt text](https://openedx.microsoft.com/assets/courseware/v1/c9f38f194b59ca4ef4c4131d2d95cf36/asset-v1:Microsoft+AZ-300.1+2019_T2+type@asset+block/AZ103_Networking_Components.png)

__Virtual Networks__

![alt text](https://openedx.microsoft.com/assets/courseware/v1/df5fa24897ed23de8fb8f0cdf333c7b2/asset-v1:Microsoft+AZ-300.1+2019_T2+type@asset+block/AZ103_Virtual_Networks.png)

__Subnets__

![alt text](https://openedx.microsoft.com/assets/courseware/v1/51205a0dc391b602e93e9069a6e98014/asset-v1:Microsoft+AZ-300.1+2019_T2+type@asset+block/AZ103_Subnets.png)

__Implementing Virtual Networks__

![alt text](https://openedx.microsoft.com/assets/courseware/v1/a0b76f3bbd0ad724a6f9269d7f82aec4/asset-v1:Microsoft+AZ-300.1+2019_T2+type@asset+block/AZ-100.4_Configuring_and_Managing_Virtual_Networks_image5.png)


__Multiple NICs in Virtual Machines__

![alt text](https://openedx.microsoft.com/assets/courseware/v1/a62cffa75c2491f4e45e6cc6b226308a/asset-v1:Microsoft+AZ-300.1+2019_T2+type@asset+block/AZ-100.4_Configuring_and_Managing_Virtual_Networks_image6.png)


---

### Review of IP Addressing

__Overview of IP Addressing__

![alt text](https://openedx.microsoft.com/assets/courseware/v1/f3c4137c2fa799e47cfe7d2281ec8c32/asset-v1:Microsoft+AZ-300.1+2019_T2+type@asset+block/AZ-100.4_Configuring_and_Managing_Virtual_Networks_image9.png)

1. Private IP addresses: Used for communication within an Azure virtual network (VNet), and your on-premises network, when you use a VPN gateway or ExpressRoute circuit to extend your network to Azure.

2. Public IP addresses: Used for communication with the Internet, including Azure public-facing services.

    IP addresses can also be statically assigned or dynamically assigned. Static IP addresses do not change and are best for certain situations such as:
    
    - DNS name resolution, where a change in the IP address would require updating host records.
    
    - IP address-based security models which require apps or services to have a static IP address.
    
    - SSL certificates linked to an IP address.
    
    - Firewall rules that allow or deny traffic using IP address ranges.
    
    - Role-based VMs such as Domain Controllers and DNS servers.

    >As a best practice you may decide to separate dynamically and statically assigned IP resources into different subnets. And, IP Addresses are never managed from within a virtual machine.

__Public IP Addresses__

A public IP address resource can be associated with virtual machine network interfaces, internet-facing load balancers, VPN gateways, and application gateways. Azure can provide an IP address (dynamic assignment) or you can assign the IP address (static assignment). The type of resource affects the assignment.

Public IP addresses |	IP address association	| Dynamic	| Static
--- | --- | --- | ---
Virtual Machine | NIC | Yes | Yes
Load Balancer | Front-end configuration | Yes | Yes
VPN Gateway | Gateway IP configuration | Yes | No
Application Gateway | Front-end configuration | Yes | No

__Address SKUs__

![alt text](https://openedx.microsoft.com/assets/courseware/v1/5c6d36ba841c46a2af030b4d9dfd19c4/asset-v1:Microsoft+AZ-300.1+2019_T2+type@asset+block/AZ103_Public_IP_Addressing.png)

__Private IP Addresses__

A private IP address resource can be associated with virtual machine network interfaces, internal load balancers, and application gateways. Azure can provide an IP address (dynamic assignment) or you can assign the IP address (static assignment).

Private IP Addresses	| IP address association	| Dynamic	| Static
--- | --- | --- | ---
Virtual Machine | NIC | Yes | Yes
Internal Load Balancer | Front-end configuration | Yes | Yes
Application Gateway | Front-end configuration | Yes | Yes

__Service Endpoints__

A virtual network service endpoint provides the identity of your virtual network to the Azure service. Once service endpoints are enabled in your virtual network, you can secure Azure service resources to your virtual network by adding a virtual network rule to the resources.

Today, Azure service traffic from a virtual network uses public IP addresses as source IP addresses. With service endpoints, service traffic switches to use virtual network private addresses as the source IP addresses when accessing the Azure service from a virtual network. This switch allows you to access the services without the need for reserved, public IP addresses used in IP firewalls.

![alt text](https://openedx.microsoft.com/assets/courseware/v1/974d459ae6abaa063a4893afccdf1bb2/asset-v1:Microsoft+AZ-300.1+2019_T2+type@asset+block/AZ103_Service_Endpoint_Addresses.png)
 
 __Service Endpoint Services__
 - Azure Storage
 - Azure SQL Database and Azure SQL Data Warehouse
 - Azure Database for PostgreSQL server and MySQL
 - Azure Cosmos DB
 - Azure Key Vault
 - Azure Service Bus and Azure Event Hubs
 - Azure Data Lake Store Gen 1
> Adding service endpoints can take up to 15 minutes to complete
 
![alt text](https://openedx.microsoft.com/assets/courseware/v1/0ba41ca33616f09b647bab45059b18f4/asset-v1:Microsoft+AZ-300.1+2019_T2+type@asset+block/AZ103_Secure_Access_to_Storage.png)

---

### Network Routing







---

### Intersite Connectivity


---

### Virtual Network Perring


---